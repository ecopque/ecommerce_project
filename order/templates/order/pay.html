<!-- # FILE: /order/templates/order/pay.html -->

{% extends 'base.html' %}

{% load brfilters %}
{% load static %}

{% block content %}
    
    <div class="row">
        <div class="col">
            <h3>Choose the payment method</h3>
            <p>For developers: add your preferred payment method.</p>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <h3>{{order}}</h3> <!-- #1: -->

            <div class="row mt-4">
                <!-- # IMPORT⬇: /order/models.py -->
                <div class="col-lg-2 font-weight-bold">Order number:</div>
                <div class="col-lg-4">{{order.id}}</div> <!-- #2: -->
                <div class="col-lg-2 font-weight-bold">Total to pay:</div>
                <div class="col-lg-4">{{order.total|format_price}}</div> <!-- # -->
                <div class="col-lg-2 font-weight-bold">Number of items:</div>
                <div class="col-lg-4">{{order.total_qtd}}</div> <!-- # -->
                <div class="col-lg-2 font-weight-bold">Status:</div>
                <div class="col-lg-4">{{order.get_status_display}}</div> <!-- #3: -->
            </div>

            <div class="row mt-4">
                <div class="col">
                    <h3>Products</h3>
                </div>
            </div>

            <div class="table-responsive mt-3">
                <table class="table">
                    <tr>
                        <th class="d-none d-lg-block">Image</th>
                        <th>Product</th>
                        <th>Variation</th>
                        <th>Quantity</th>
                        <th>Total</th>
                    </tr>

                    <!-- # IMPORT⬇: /order/models.py | class OrderItem(models.Model) -->
                    {% for line in order.orderitem_set.all %} <!-- #4: -->
                        <tr>
                            <td class="d-none d-lg-block">
                                <img class="cart-img" src="{% get_media_prefix %}{{line.image}}"> <!-- #5: -->
                            </td>
                            <td>{{line.product_name}}</td> <!-- # -->
                            <td>{{line.variation}}</td> <!-- # -->
                            <td>{{line.quantitative}}</td> <!-- # -->
                            <td>
                                {% if line.price_promotional %} <!-- # -->
                                    {{line.price_promotional|format_price}} <!-- # -->
                                {% else %}
                                    {{line.price|format_price}} <!-- # -->
                                {% endif %}
                            </td>
                        </tr>
                    {% endfor %}
                </table>
            </div>

            <div class="row mt-4">
                <div class="col">
                    <a href="{% url 'product:list' %}" class="btn btn-primary btn-block btn-lg">Exit</a>
                </div>
            </div>


        </div>
    </div>

{% endblock %}


<!-- ########################################################### -->
<!-- #1: Exibe o objeto order, representando o pedido atual. Este objeto é passado para o template na visualização Pay e exibe detalhes do pedido no HTML. -->
<!-- #2: Mostra o número do pedido, um identificador único para o pedido específico do usuário. -->
<!-- #3: Exibe o status atual do pedido em um formato mais legível para o usuário, como "Pendente", "Pago", etc. -->
<!-- #4: Itera sobre todos os itens do pedido (OrderItem) associados ao pedido atual (order). Cada item representa um produto específico no pedido. -->
<!-- #5: Exibe a imagem do item do pedido, utilizando o atributo image de OrderItem. Aqui, line.image representa o caminho da imagem armazenado na instância OrderItem. -->

<!-- # https://linktr.ee/edsoncopque -->